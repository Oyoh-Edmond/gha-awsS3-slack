name: Random numbers

on: 
    workflow_dispatch:
        inputs:
            filename:
                description: 'File to display'
                required: true
                default: 'rand.txt'
    
jobs:
    echo_file:
      runs-on: ubuntu-latest
      steps:
      - name: Checkout repository
        uses: actions/checkout@v3
  
      - name: Display file contents
        run: cat ${{ github.event.inputs.filename }}

    notify_slack:
        runs-on: ubuntu-latest
        steps:
        - name: Store the output in a variable
          run: |
                content=$(cat ${{ github.event.inputs.filename }})
                echo "$content"
                echo "::set-output name=output::$content"
        - name: Notify Slack on Job's Success
          if: ${{ success() }}
          uses: wearerequired/slack-messaging-action@v1
          with:
                  bot_token: ${{ secrets.SLACK_BOT_TOKEN }}
                  channel: githubactions 
                  payload: >-
                    {
                      "username": "Edmond & Jide",
                      "attachments": [
                          { 
                            "text": "${{ steps.read_file.outputs.file_content }}" 
                            "footer": "<https://github.com/${{ github.repository }}|${{ github.repository }}>"
                          }
                      ]
                    }

      
          